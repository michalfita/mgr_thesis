%% LyX 1.5.1 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass[11pt,oneside,polish,wide,pdftex]{mwbk}
\usepackage[T1]{fontenc}
\usepackage[latin2]{inputenc}
\usepackage{geometry}
\geometry{verbose,a4paper,tmargin=2cm,bmargin=2cm,lmargin=30mm,rmargin=26mm}
\pagestyle{uheadings}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\usepackage{floatflt}
\usepackage{varioref}
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage{setspace}
\onehalfspacing
\IfFileExists{url.sty}{\usepackage{url}}
                      {\newcommand{\url}{\texttt}}

\makeatletter

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
\newcommand{\noun}[1]{\textsc{#1}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
\usepackage{fix-cm}

\usepackage{type1ec}
\usepackage[T1]{fontenc}


%\usepackage[pdftex,man,opt]{wmstitle}
\usepackage[pdftex,type=mgr]{aghtitle}
\usepackage[bookmarks, bookmarksopen=true, bookmarksnumbered=true, colorlinks=true, pdftitle={System sterowania robotem mobilnym}, pdfauthor={Micha³ Fita}]{hyperref}

\usepackage[protrusion=true,expansion=true, tracking=true, spacing=true, kerning=true, selected=true, babel=true]{microtype}

\usepackage{babel}
\makeatother

\begin{document}
%\promotorJeden{dr in¿. Roman Krasowski}
%\nralbumuJeden{209034}
%\authorJeden{Micha³ Fita}
%\nralbumuDwa{}
%\authorDwa{}
\title{System sterowania robotem mobilnym}
\author{Micha³ Fita}
\maketitle

\tableofcontents{}


\chapter*{Wstêp}

S³owo {}``robot'' pojawia siê po raz pierwszy w sztuce, której autorem
jest czeski pisarz Karel Èapek. Okre¶lenie to szybko trafia pomiêdzy
ok³adki dzie³ literatury fantastycznej, zmieniaj±c pierwotne znaczenie
ze sztucznie chodowanego cz³owieka na sztucznie konstruowanego cz³owieka,
by przez kolejne lata ewoluowaæ do dziesiejszego znaczenia elektromechanicznej
maszyny wykonuj±cej ró¿norodne prace. Premiera czeskiej sztuki mia³a
miejsce w 1921 roku, a dzi¶ prawie wiek pó¼niej s³owo {}``robot''
jest tak powszechne, ¿e ma³o kto wie, jaka jest jego geneza. Tym bardzej
niewielu wie, ¿e termin {}``robotyki'' jako dziedziny badañ naukowych
stworzy³ Isaac Asimov, który u¿y³ go w swoim opowiadaniu w 1942 roku.

S³owo to z kart ksi±¿kek szybko trafia do ¶wiata nauki i zaczyna ¿yæ
w³asnym ¿yciem w raz z postêpem technologii elektronicznej i mechanicznej.
Choæ dzi¶ nadal robotyka przez wielu traktowana jest jako zabawa,
ni¿ powa¿na dziedzina naukowa, to jednak znaczenie robotyki we wspó³czesnym
¶wiecie gwa³townie ro¶nie. Stosowanie robotów w produkcji przemys³owej
jest ju¿ standardem; nie przypominaj± one wygl±dem cz³owieka, lecz
za to s± dobrze przystosowane do pracy, któr± maj± realizowaæ.

Ustanowienie 13 wrze¶nia 2007 roku -- przy wsparciu ze strony Google
-- nagrody \noun{Lunar X Prize}%
\footnote{Szczegó³y na stronie fundacji X Prize: \url{http://www.xprize.org}.%
} stawia robotykê przed nowym wyzwaniem wspieranym przez pieni±dze
prywantych inwestorów na now± niespotykan± dot±d skalê, porównywaln±
z t±, która towarzyszy³a do 2004 roku wy¶cigowi o pobicie bariery
atmosfery i kosmosu przez prywatny pojazd kosmiczny. Tym razem walka
toczy siê o konstrukcjê robota, który jako pierwszy wyl±duje na ksiê¿ycu
i pokona co najmniej 500 metrów po jego powierzchni przekazuj±c na
Ziemiê zdjêcia i film video. Ogromna nagroda finansowa napêdza do
pracy si³y i umys³y, które wcze¶niej wogóle nie zak³ada³y zajêcia
siê takim problemem. Czeka nas fascynuj±ca rywalizacja, a na rezultat
ludzko¶æ bêdzie czekaæ z tak samo zapartym tchem, jak na start Space
Ship One.

+

Niedocenianym obszarem wspó³czesnej in¿ynierii jest robotyka. £±czy
ona w sobie wiedzê z dziedziny elektroniki, automatyki, mechaniki
oraz in¿ynierii oprogramowania. Wielu nawet dzi¶ uwa¿a robotykê za
zabawê, a nie powa¿n± dziedzinê badawczo-rozwojow±. Lecz sukcesy takich
projektów jak Mars Pathfinder czy DARPA Grand Challange pokazuj± rosn±ce
znaczenie robotyki we wspó³czesnym ¶wiecie. Bill Gates powiedzia³:
{}``Wiek XX by³ er± komputerów, wiek XXI bêdzie er± robotów''.

S³owo {}``robot'' zosta³o po raz pierwszy u¿yte w sztuce {}``R.U.R.''
(cz. \emph{Rosumovi Umìli Roboti} - Roboty Uniwersalne Rossuma), której
autorem jest Karel Èapek - jeden z najbardziej uznanych pisarzy czeskich.
Pierwotnie s³owo to odnosi³o siê do istot ¿ywych, sztucznie produkowanej
uproszczonej wersji ludzi, jedna¿e dzi¶ okre¶la urz±dzenia mechaniczne.
Termin {}``robotyka'' u¿y³ poraz pierwszy znany autor literatury
fantastycznej Isaac Asimov w roku 1942 roku w opowiadaniu {}``Zabawa
w berka'' (ang. \emph{{}``Runaround''}). W jego literaturze pojawiaj±
siê równie¿ s³ynne trzy prawa robotyki:

\begin{enumerate}
\item Robot nie mo¿e skrzywdziæ cz³owieka, ani przez zaniechanie dzia³ania
dopu¶ciæ, aby cz³owiek dozna³ krzywdy.
\item Robot musi byæ pos³uszny rozkazom cz³owieka, chyba ¿e stoj± one w
sprzeczno¶ci z Pierwszym Prawem.
\item Robot musi chroniæ sam siebie, je¶li tylko nie stoi to w sprzeczno¶ci
z Pierwszym lub Drugim Prawem. 
\end{enumerate}
Idea sztucznej istoty pojawia siê w historii znacznie wcze¶niej, w
mitologii jest wiele sztucznych istot. Choæ najbardziej znan± sztuczn±
istot± jest Golem, choæ ten najbardziej legendarny pojawia siê w drugiej
po³owie XVI jako dzie³o rabina Jehudê Löw ben Bezalela z Pragi. Najstarszy
zachowany projekt humanoidalnej sztucznej istoty to rysunki Leonarda
da Vinci przedstawiaj±ce mechanicznego rycerza, który mia³ siadaæ,
poruszaæ rêkami, g³ow± oraz szczêk±. Pierwsze znane mechanizmy przypominaj±ce
roboty s± datowane na rok 1738 i s± dzie³em Jacquesa de Vaucanson.
Zbudowa³ on androida graj±cego na flecie, gracza na tamburynie (obie
konstrukcje nie przetrwa³y rewolucji francuskiej) oraz mechaniczn±
kaczkê. On te¿ jako pierwszy zastosowa³ walec do sterowania procesem
produkcyjnym zamiast karty perforowanej.

Przedmiotem pracy jest sterownik mikroprocesorowy oraz zestaw oprogramowania
dla sterownika oraz wspó³pracuj±cego komputera PC. Platform± mechaniczn±
jest robot zabawka Robo--Actor, który ma s³u¿yæ do demonstracji dzia³ania
uk³adu i oprogramowania stworzonych w ramach tej pracy. W kolejnych
rozdzia³ach zosta³y opisane tematy teoretyczne oraz zadania realizowane
w celu konstrukcji sterownika oraz stworzenia oprogramowania zarówno
sterownika mikroprocesorowego oraz systemu kontrolnego dla komputera
PC.

Praca zosta³a podzielona na dwie logiczne czê¶ci, z której pierwsza
omawia teoretyczne zagadnienia zwi±zane z tematem robotyki i technologii
stosowanych w realizacji projektu, a czê¶æ druga opisuje praktyczn±
realizacjê wszystkich elementów z opisem kroków prowadz±cych do wyboru
stosowanych rozwi±zañ. W¶ród opisywanych tematów znajduj± siê przede
wszystkim systemy wbudowane, systemy operacyjne czasu rzeczywstego,
radiowa transmisja danych, sterowanie silników elektrycznych oraz
przetwarzanie obrazu.

Uk³ad sterownika mikroprocesorowego zosta³ zrealizowany na platformie
AVR32 firmy Atmel. Jest to rodzina 32 bitowych mikrokontrolerów wystêpuj±ca
w dwóch g³ównych odmianach, lekkiej odmianie UC3 dla mocno zintegrowanych
rozwi±zañ, oraz AP7 -- odmianie wysokowydajnych mikrokontrolerów dla
zaawansowanych aplikacji przeno¶nych, mog±cy miêdzy innymi pracowaæ
pod kontrol± systemu Linux. Istotn± przewag± oferty firmy Atmel i
uk³adów AVR32 nad uk³adami innych producentów jest bardzo silne wsparcie
dla amatorów oraz ¶rodowiska otwartego oprogramowania.


\part{Wprowadzenie teoretyczne}


\chapter{Historia}


\section{Staro¿ytno¶æ}


\section{¦redniowiecze}


\section{Czasy Napoleoñskie}

W okresie panowania Napoleona i jego europejskich podbojów do historii
zapisa³ siê {}``Mechaniczny Turek'', który mia³byæ wybitnym automatem
do gry w szachy. Skonstruowany w 1770 roku by zaimponowaæ cesarzowej
Marii Teresie przez barona Wolfganga von Kempelena mechanizm przez
prawie 80 lat podbija³ Europê i Amerykê. W historii i legendzie zapisa³
siê, gdy rzekomo w 1809 roku pokona³ samego Napoleona, uwa¿anego za
szachowego mistrza%
\footnote{Niektóre ¼ród³a podaj±, ¿e mistrzostwo Napolena wynika³o ze strachu
jego przeciwników przed przegran±.%
}.

Prawdziwy sekret tej mechanicznej maszyny zosta³ ujawniony dopiero
w 1859 roku, ju¿ po zniszczeniu maszyny w po¿arze Muzeum Peale w 1854
roku.


\chapter{Interfejsy}


\section{\label{sec:Interfejs-JTAG}Interfejs JTAG}

Interfejs JTAG jest uznanym ¶wiatowym standardem sprzêtowego sprzêgu
mikroprocesorów i uk³adów programowalnych ze stanowiskiem pracy in¿yniera,
czyli komputera PC. Popularnie u¿ywany skrót JTAG od nazwy Joint Test
Action Group to historyczna zasz³o¶æ z 1985 roku, gdy powo³ano grupê
przemys³ow± do opracowania metod testowania p³ytek drukowanych na
etapie postprodukcji. Za³o¿eniem grupy by³o opracowanie mechanizmu
pozwalaj±cego na testowanie po³±czeñ z dowolnej nó¿ki z³o¿onego uk³adu
scalonego po ¶cie¿ce poprowadzonej po p³ytce drukowanej. W roku 1990
metoda ta zosta³a zatwierdzona jako standard IEEE 1149.1\cite{jtag-std}.
Tego samego roku INTEL w³o¿y³ obs³ugê tego standardu do procesora
80486.

Zastosowana metoda testowania pozwala³a weryfikowaæ elektryczne po³±czenia
na p³ytce drukowanej z otoczeniem uk³adu, st±d nosi nazwê ¶cie¿ki
krawêdziowej lub rzadziej skanowania granicznego (ang. \textit{boundary-scan}).
Polega ona na zastosowaniu pojedynczych bramek (ang. \textit{Boundary
Scan Cells}) na wszystkich nó¿kach sygna³owych uk³adu scalonego, które
mog± byæ wymuszane w stan logiczny zero lub jeden, mog± odczytywaæ
stan logiczny nó¿ki podawany z zewn±trz lub w trakcie normalnej pracy
uk³adu pozostawaæ nieaktywne i odizolowane od wyprowadzenia. £añcuch
takich bramek tworzy rejestr (ang. \textit{Boundary Scan Register}),
który wspó³pracuje z dodatkowymi rejestrami instrukcji i danych.

W dzisiejszych czasach znaczenie interfejsu IEEE 1149.1 i wszelkich
jego pochodnych specyficznych dla ró¿nych producentów ma tak naprawdê
najwiêksze znaczenie na etapie przygotowywania oprogramowania dla
urz±dzeñ wyposa¿onych w mikrokontrolery. O ile architektura sprzêtowa
szeregowej komunikacji z wewnêtrznymi uk³adami mikrokontrolerów zosta³a
zachowana to ka¿dy producent stosuje swoje rozszerzenia i wymaga w³asnego
oprogramowania do sterowania interfejsem, które umo¿liwia programowanie
pamiêci Flash w uk³adach oraz przeprowadzanie z³o¿onego procesu uruchomieniowego
wspomaganego przez sprzêtowe pu³apki. Programowanie uk³adów scalonych
z zastosowaniem tej metody (ale nie tylko) nazywa siê programowaniem
w systemie (ang. \emph{in-system programming}, w skrócie ISP). Przyk³ady
wielu mikrokontrolerów 8-bitowych pokazuj±, ¿e ISP nie wymaga istnienia
pe³nego IEEE 1149.1 a wymaga tylko dostarczenia wyprowadzeñ pozwalaj±cy
szeregowo programowaæ pamiêæ Flash lub sieæ bramek wewn±trz uk³adu
scalonego (tak robi ATMEL z rodzin± uk³adów 8-bitowych i Xilinx dla
uk³adów CPLD).


\subsection{Zasada dzia³ania JTAG}

%
\begin{figure}
\noindent \begin{centering}
\includegraphics[height=0.3\paperheight]{vector/jtag-internals-01}
\par\end{centering}

\caption{\label{fig:Schemat-blokowy-implementacji}Schemat blokowy implementacji
JTAG w uk³adzie }

\end{figure}


Prezentowany na \ref{fig:Schemat-blokowy-implementacji} diagram wewnêtrznej
architektury JTAG wbudowanej w uk³adzie pokazuje, jak pojedyncze wyprowadzenia
uk³adu mog± byæ testowane i ustawiane przez pojedyncze komórki rejestru.
Rejestr ten przypomina klasyczny rejestr przesuwny i jest aktywowany
w trybie testowym przez wej¶cie TMS, przy czym w zale¿no¶ci od instrukcji
przes³anej na wej¶cie TDI warto¶æ komórki jest odczytywana i wyprowadzana
poprzez odpowied¼ wysy³an± na wyj¶cie TDO, b±d¼ programowana warto¶ci±
przes³an± razem z rozkazem JTAG. Rejestr ten jest taktowany czêstotliwo¶ci±
podawan± przez urz±dzenie testuj±ce na wej¶cie TMS, kierunek dzia³ania
rejestru jest jeden. Za poprawn± obs³ugê danych pochodz±cych z poszczególnych
komórek testuj±cych odpowiada urz±dzenie steruj±ce.

Obs³uga interfejsu odbywa siê szeregowo z du¿± szybko¶ci±, czêsto
zbli¿on± do prêdko¶ci pracy uk³adu w gotowym systemie, st±d wymagania
dla urz±dzeñ obs³uguj±cych interfejs zgodny z IEEE 1149.1 we wspó³czesnych
uk³adach 32 bitowych s± naprawdê wy¶rubowane, co wp³ywa równie¿ na
cenê tych urz±dzeñ. Jednym z takich urz±dzeñ firmy Atmel jest JTAG
ICE mk-II opisywany w rozdziale \vref{sec:JTAG-ICE}.

Technikê ¶cie¿ki krawêdziowej mo¿na wykorzystywaæ w celu przetestowania
ró¿nych elementów. W uk³adzie wspieraj±cym JTAG mo¿liwe jest testowanie
zarówno samych uk³adów i po³±czeñ poza uk³adem. Mo¿liwe jest testowanie
elementów nie posiadaj±cych w³asnych wyprowadzeñ dla JTAG, taki jak
pamiêci RAM. Testy polegaj± wtedy na takim sterowaniu wyprowadzeñ
uk³adu, jak przy normalnej wspó³pracy uk³adem pamiêci (lub innym testowanym)
i odczytywanie stanów z wyprowadzeñ uk³adu. Przypomina to wtedy rzeczywiste
zachowanie uk³adu testowanego w systemie.

Wykorzystanie wszystkich mo¿liwo¶ci JTAG do testowania, wymaga programu
potrafi±cego wiernie symulowaæ zachowanie komórek ¶cie¿ki krawêdziowej,
w zastosowanych uk³adach. Na rynku dostêpne jest oprogramowanie, pozwalaj±ce
na kompleksowe sterowanie testowanie i programowanie przez IEEE 1149.1.
W¶ród jego producentów s± takie firmy jak JTAG Technologies, XJTAG,
Corelis, Intellitech, Universal Scan, Applegate czy Temento Sytems.
Oprogramowanie to wykorzystuje pliki BSDL, dostarczane przez producentów
uk³adów scalonych zawieraj±cych JTAG. Zawieraj± one dok³adny sformalizowany
opis umieszczonych w uk³adzie komórek JTAG i ich otoczenia. Tre¶æ
pliku zapisana jest w jêzyku BSDL (ang. \emph{Boundary-Scan Description
Language}), który zosta³ opracowany na podstawie wybranych elementów
sk³adni jêzyka VHDL. Na podstawie wgranych plików oraz wygenerowanych
wektorów testowych, oprogramowanie steruj±ce potrafi do¶æ dok³adnie
obliczyæ przewidywany procent pokrycia uszkodzeñ. Umo¿liwia tak¿e
precyzyjne zlokalizowanie uszkodzenia, w przypadku, gdy otrzymany
na wyj¶ciu ¶cie¿ki ci±g bitów, nie bêdzie zgadza³ siê z przewidywanym.
(na podstawie \cite{jtag-elektronik-online})


\subsection{Zalety stosowania JTAG}

¦cie¿ka krawêdziowa jest metod± prost± w implementacji i jest wzglêdnie
tania w stosowaniu. Wyró¿nia siê pozytywnie na tle innych dostêpnych
metod testowania uk³adów elektronicznych. Wiêkszo¶æ z testów dostêpnych
za pomoc± ¶cie¿ki krawêdziowej jest mo¿liwa do wykonania tak¿e za
pomoc± ³o¿a szpilkowego%
\footnote{ ³o¿e szpilkowe (ang. \emph{nail bed tester}), to pod³o¿e z drobnymi,
gêsto rozmieszczonymi szpilkami, stykaj±cymi siê w punktach kontaktowych
z punktami testowymi na p³ytce drukowanej, pomiêdzy którymi dokonuje
siê pomiaru paramterów sygna³u elektrycznego; koszty testera tego
typu to rz±d kilkunastu do setek tysiêcy dolarów. %
} to ta technika jest nieporównywalnie dro¿sza. Zwiêkszenie powierzchni
p³ytki drukowanej przez ulokowanie dodatkowych punktów testowych na
powierzchni PCB równie¿ podnosi koszty takiego testu. Z racji swych
ograniczeñ, JTAG nie mo¿e zast±piæ pe³nej funkcjonalno¶ci testera
ig³owego, zwi±zanej przyk³adowo z testowaniem uk³adu pod k±tem bardzo
szybkich impulsów i innych niestandardowych sygna³ów. Zdarza siê i
tak, ¿e ¶cie¿ka brzegowa oferuje mo¿liwo¶ci, których zwyk³e ³o¿e szpilkowe
nie jest w stanie zapewniæ. Przyk³adem jest testowanie uk³adów BGA,
wybieranych przez producenta w celu ograniczenia rozmiarów urz±dzenia.
Dostosowanie p³ytki z uk³adem BGA do testowania za pomoc± igie³ wymaga
wyprowadzenia bardzo wielu dodatkowych punktów testowych, co spowoduje
znaczny wzrost jej powierzchni. Co prawda, JTAG nie jest jedyn± sprawn±
metod± testowania uk³adów BGA w systemie, ale konkurencyjna opcja,
polegaj±ca na prze¶wietlaniu zmontowanej p³ytki, za pomoc± promieni
X, nie tylko wymaga wiêkszych nak³adów, ale mo¿e byæ niebezpieczna
zarówno dla testowanej elektroniki, jak i pracowników laboratorium.

Kolejna zaleta posiadania JTAG w uk³adzie to mo¿liwo¶æ jego testowania
przez ca³y czas jego ¿ycia. Zastosowanie JTAG pozwala w dowolnej chwili
wykonaæ testy w trybie testowania i w prosty sposób oceniæ jego sprawno¶æ,
bez konieczno¶ci wymontowywania podzespo³ów lub umieszczania systemu
w specjalnych maszynach testuj±cych. Wbudowanie logiki testera na
p³ytkê drukowan± z uk³adem pozwala przeprowadzaæ testy bez konieczno¶ci
do³±czania zewnêtrznych urz±dzeñ testuj±cych. Daje to mo¿liwo¶æ regularnego
kontrolowania sprawno¶ci uk³adu, dziêki czemu jest mo¿liwe zapewnienie
wysokiego poziomu bezpieczeñstwa i jako¶ci pracy ca³ego urz±dzenia.
(na podstawie \cite{jtag-elektronik-online,why-jtag-works})


\subsection{Wady stosowania JTAG}

Dla wielu producentów cyfrowego sprzêtu elektronicznego istnienie
wyprowadzeñ dla JTAG stanowi zagro¿enie dla naruszenia dóbr intelektualnych
zawartych w rozwi±zaniach zastosowanych w sprzedawanych urz±dzeniach.
Umiejêtnie zastosowany JTAG pozwala na przeprowadzanie in¿ynierii
odwrotnej uk³adu i oprogramowania w nim zawartego (mimo zabezpieczenia
wewnêtrznej pamiêci Flash przed bezpo¶rednim odczytem). Dziêki takim
mo¿liwo¶ciom, kilka bardzo popularnych urz±dzeñ%
\footnote{Popularny router Linksys WRT54G posiada alternatywne oprogramowanie,
dostêpne g³ównie na http://www.openwrt.org.%
} zyska³o szerokie grono u¿ytkowników ze ¶rodowiska oprogramowania
otwartego, które tworzy w³asne wersje oprogramowania o alternatywnych
mo¿liwo¶ciach. Nieliczni producenci zdecydowali siê z sukcesem wspieraæ
w pewnym stopniu takie dzia³ania ¶rodowisk u¿ytkowników. Im wiêcej
mo¿na zrobiæ z urz±dzeniem przez modyfikacjê oprogramowania, tym wy¿sze
ceny tych urz±dzeñ s± na rynku wtórnym.


\subsection{On-chip debugging}

Rozszerzenia producentów wbudowane w uk³ad pozwalaj± na stosowanie
JTAG do uruchamiania i odpluskwiania programów dzia³aj±cych w rzeczywistym
systemie (ang. \emph{on-chip debugging}).


\section{\label{sec:Interfejs-USB}Interfejs USB}

Interfejs USB (ang. \emph{Universal Serial Bus}) jest dzi¶ najpopularniejszym
interfejsem szeregowym dla ró¿nych urz±dzeñ wspó³pracuj±cych ze sob±,
równie¿ komputerów z urz±dzeniami wej¶cia-wyj¶cia i urz±dzeniami multimedialnymi,
takimi jak odtwarzacze muzyki, aparaty i kamery cyfrowe. Ogromna ilo¶æ
narzêdzi dla elektroników korzysta ju¿ z interfejsu USB (w tym JTAG
ICE mk-II opisany w rozdziale \vref{sec:JTAG-ICE} oraz zestaw EVK1100
opisany w rozdziale <brak>). Jednak¿e implementacja USB we w³asnym
urz±dzeniu mo¿e byæ z wielu wzglêdów k³opotliwa. Poni¿szy opis techniczny
wyja¶ni dlaczego tak jest i jakie stosuje siê aktualnie rozwi±zania
tego problemu.

Standard USB zosta³ oficjalnie og³oszony w 1996 roku przez konsorcjum
z³o¿one z firm: Compaq, DEC, IBM, Intel, Microsoft, Nec i Northern
Telecom. Zatwierdzono wtedy standard USB 1.0, który istnia³ do 1999
roku, zyska³ popularno¶æ gdy Microsoft i Apple wprowadzi³y sterowniki
USB do swoich systemów operacyjnych. Od tamtego momentu USB wystêpuje
aktualnie w dwóch obowi±zuj±cych wersjach:

\begin{description}
\item [{USB~1.1}] Standard ten koryguje braki standardu w wersji 1.0 i
stosowany od 1999 roku jest do dzi¶ w wiêkszo¶ci urz±dzeñ wej¶cia-wyj¶cia,
gdy¿ jest prostszy w implementacji od USB 2.0. Obs³uguje dwie standardowe
prêdko¶ci transmisji danych 1,5~Mbit/s oraz 12~Mbit/s. Do jednego
kontrolera mo¿e byæ pod³±czonych maksymalnie 127 urz±dzeñ.
\item [{USB~2.0}] Istniej±cy od roku 2000 standard ten wprowadza tryb
du¿ej prêdko¶ci (ang. \emph{High Speed USB}) o prêdko¶ci 480~Mbit/s.
Dodatkowo w roku 2001 pojawia siê suplement On-the-Go pozwalaj±ce
³±czyæ ze sob± takie urz±dzenia jak dysk twardy i aparat cyfrowy,
polegaj±ce na negocjacji, które z po³±czonych urz±dzeñ bêdzie pe³niæ
rolê hosta.
\end{description}
Urz±dzenia pod³±czone do portów interfejsu USB nie wymagaj± dodatkowego
zasilania w przypadku spe³niania pewnych warunków, standardowo pojedynczy
port mo¿e zostaæ obci±¿ony pr±dem 100~mA. Po wykonaniu programowej
konfiguracji port powinien umo¿liwiaæ pobór do 500~mA. Fakt ten jest
wykorzystywany jest ju¿ nawet do ³adownia telefonów komórkowych pod³±czonych
przez port USB do komputera PC. Aktualnie trwaj± pracê nad stworzeniem
standardu Powered USB, który umo¿liwi zasilanie urz±dzeñ nawet napiêciem
24~V i obci±¿eniem do 6~A, co pozwoli³oby na rezygnacjê z zasilania
zewnêtrznego takich urz±dzeñ jak drukarki, czy skanery.

W¶ród nowo¶ci zwi±zanych z USB warto wspomnieæ powstanie standardu
Wireless USB, który zachowuj±c zgodno¶æ komunikacyjn± ze zwyk³ym USB
mia³by umo¿liwiaæ standaryzowan± bezprzewodow± komunikacjê wielu urz±dzeñ,
w tym wej¶cia-wyj¶cia oraz na przyk³ad fotograficznych aparatów cyfrowych.


\subsection{Zasada dzia³ania USB}

Specyfikacja standardu USB okre¶la precyzyjnie wszystkie aspekty zwi±zane
z implementacj± obs³ugi portu i komunikacji, co obejmuje równie¿ mechaniczn±
konstrukcjê gniazd i wtyków USB, wymagania elektryczne okablowania.
Dodatkowo istniej± specyfikacje dla kontrolerów hostów USB:

\begin{description}
\item [{UHCI}] (ang. \emph{Universal Host Controller Interface}) opracowany
przez Intela, który k³adzie najwiêkszy nacisk na oprogramowania redukuj±c
koszty sprzêtu.
\item [{OHCI}] (ang. \emph{Open Host Controller Interface}) opracowany
wspólnie przez Compaq, Microsoft i National Semiconductor, który k³adzie
najwiêkszy nacisk na czê¶æ sprzêtow± redukuj±c oprogramowanie kontrolera
do minimum.
\item [{EHCI}] (ang. \emph{Enhanced Host Controller Interface}) opracowany
dopiero na potrzeby USB 2.0 przez Intel, Compaq, NEC, Lucent i Microsoft.
£±czy pe³ne elementy tworz±c wspólny standard wspó³pracy urz±dzeñ
USB, równie¿ z rozszerzeniem On-the-Go.
\end{description}
Fizycznie interfejs USB jest magistral± szeregow± zrealizowan± na
4 przewodach, z których dwa dostarczaj± zasilanie +5~V oraz GND.
Pozosta³e dwa przewody tworz± skrêcon± parê transmituj±c± sygna³y
ró¿nicowe. Wykorzystywane jest przy tym kodowanie NRZI (ang. Non Return
to Zero Invert) do transmisji danych zawieraj±ce pole synchronizacyjne
dla uzgadniania synchronizacji zegarów urz±dzeñ podpiêtych do magistrali.
Zastosowane kodowanie NRZI dzia³a na zasadzie zmiany stanu na linii
transmisyjnej w sytuacji transmitowania logicznej jedynki. Wad± tego
rozwi±zania jest utrata synchronizacji przy d³ugich ci±gach zer, st±d
dodanie pól synchronizacyjnych w logicznej strukturze transmisji USB.

Dla niskiej (1,5~MBit/s) i pe³nej (12~Mbit/s) prêdko¶ci transmisji
kodowanie ró¿nicowego zera (oznaczanego symbolem {}``K'') odbywa
siê przez podci±ganie linii D+ ponad 2,8~V rezystorem 15~k$\Omega$
pod³±czonym do masy, a linii D-- poni¿ej 0,3~ poprzez rezystor 1,5~k$\Omega$
pod³±czony do 3,6~V. Kodowanie ró¿nicowej jedynki (oznaczanej symbolem
{}``J'') odbywa siê przez podci±ganie D-- powy¿ej 2,8~V i D+ poni¿ej
0,3~V poprzez te same rezystory. Dla odbiornika sygna³ {}``J''
jest zdefiniowany jako D+ wiêksze o 200~mV od D--, a sygna³ {}``K''
jako D+ mniejsze o 200~mV od D--. Polaryzacja sygna³u zamienia siê
dla wysokiej prêdko¶ci (480~Mbit/s) i {}``J'' oznacza ró¿nicow±
1, a {}``K'' oznacza ró¿nicowe 0.

Transceivery USB obs³uguj± sygnalizacjê ró¿nicow± opisan± powy¿ej,
ale równie¿ mog± indywidualnie terminowaæ linie D-- i D+, co jest
stosowane do specjalnej sygnalizacji na magistrali (jest to mo¿liwe
dziêki zasilaniu magistrali USB). Przyk³adowo sygna³ SE0 jest otrzymywany
przez utrzymanie niskiego stanu na obu liniach D-- i D+. Nie mo¿na
tego faktu pomijaæ przy implementacji interfejsu USB, gdy¿ nie wystarczy
porównywanie sygna³ów ró¿nicowych dla realizacji prawid³owej komunikacji
po magistrali USB.

Impedancja linii dla niskiej i pe³nej prêdko¶ci wynosi wed³ug specyfikacji
90~$\Omega\ \pm$~15\%. Tryb wysokiej prêdko¶ci wymaga sta³ego pr±du
17,78~mA dla sygnalizacji, co ma redukowaæ poziom szumu.

Identyfikacja prêdko¶ci urz±dzenia odbywa siê przez podci±ganie linii
D+ do 3,3~V dla pe³nej prêdko¶ci lub przez podci±ganie D-- do 3,3~V
dla niskiej prêdko¶ci przez rezystor 1,5~k$\Omega$. Brak jednego
z tych podci±gniêæ spowoduje niewykrycie urz±dzenia. Czê¶æ uk³adów
scalonych posiada te rezystory wbudowane, mo¿na je wtedy kontrolowaæ
programowo, jednak czê¶æ wymaga rezystora zewnêtrznego wed³ug specyfikacji.
Identyfikacja wysokiej prêdko¶ci urz±dzanie odbywa siê na drodze negocjacji
z hubem, a po jego w³±czeniu rezystor podci±gaj±cy jest od³±czany.


\subsection{Identyfikacja urz±dzeñ USB}

Interfejs USB wspiera filozofiê w³±cz i dzia³aj (ang. \emph{Plug and
Play}) wraz z dynamicznym ³adowaniem sterowników. U¿ytkownik wpina
urz±dzenie do magistrali i nastêpuje jego automatyczna identyfikacja.
Podobnie, po zakoñczeniu pracy wystarczy po prostu od³±czyæ urz±dzenie
i nast±pi automatyczna identyfikacja odpiêcia z magistrali. £adowanie
i usuwanie z pamiêci sterowników urz±dzenia nastêpuje automatycznie.
Przy pierwszym ³adowaniu sterowników system operacyjny mo¿e za¿±daæ
wskazania fizycznej lokalizacji plików sterownika urz±dzenia. Identyfikacja
urz±dzeñ nastêpuje poprzez dwa numery identyfikacyjne PID (ang. \emph{Product
IDentification} -- identyfikator produktu) i VID (ang. \emph{Vendor
IDenticifation} -- identyfikator producenta). Uzyskanie numeru producenta
wymaga wykupienia licencji od USB Implementation Forum%
\footnote{Szczegó³y dotycz±ce rejestracji numeru producenta (ang. \emph{Vendor
ID}) mo¿na znale¼æ na stronie: http://www.usb.org/developers/vendor.html.%
}, co kosztuje od \$2000 w górê. Jest to powa¿n± barier± dla elektroniki
amatorskiej.

Problem identyfikatorów dla projektów amatorskich korzystaj±cych z
USB zosta³ jednak rozwi±zany na nastêpuj±ce sposoby:

\begin{itemize}
\item Projektant urz±dzenia stosuj±cy uk³ad mikrokontrolera z wbudowan±
sprzêtow± obs³ug± USB mo¿e wykorzystaæ numer produktu puli oferowanej
przez producenta uk³adu. Numer producenta bêdzie wtedy taki sam, jak
producent uk³adu scalonego. Jest to rozwi±zanie dopuszczalne tylko
dla produktów niekomercyjnych.
\item Projektant urz±dzenia planuj±cy rozpowszechniania lub sprzeda¿ urz±dzenia
mo¿e skorzystaæ z us³ug firm%
\footnote{Tak± ofertê maj± miêdzy innymi: Mechanique (http://www.mecanique.co.uk),
EZPrototypes (http:://www.ezprototypes.com), MCS Electronics (http://mcselec.com).%
}, które zarejestrowa³y swój identyfikator producenta i odsprzedaj±
pojedyncze identyfikatory produktu dla zainteresowanych elektroników
lub ma³ych firm, których bud¿et nie pozwala na rejestracjê w USB Impelentation
Forum.
\end{itemize}
Oba powy¿sze rozwi±zania nie pozwalaj± na stosowanie zastrze¿onego
logo certyfikowanego produktu USB, którego licencja dopuszcza tylko
firmy maj±ce podpisan± umowê z USB Implementation Forum.


\subsection{Metody implementacji}


\chapter{Mikrokontrolery}

Rozdzia³ opisuje wybrane konstrukcje mikrokontrolerów oferowanych
przez ró¿nych producentów, których wybór rozwa¿ano do zastosowania
w projekcie. Opis obejmuje szczegó³y techniczne konstrukcji oraz aspekty
in¿ynierskie zwi±zane z zastosowaniem opisywanych uk³adów w praktyce.


\section{\label{sec:ARM}ARM Limited}

Firma ARM Limited z siedzib± w Wielkiej Brytanii, nie jest producentem
uk³adów scalonych mikroprocesorów, lecz zajmuje siê projektowaniem
rdzeni procesorów oraz sprzeda¿± w³a¶no¶ci intelektualnej do tych
projektów firmom trzecim, g³ównie uznanym producentom uk³adów mikroprocesorowych,
o których mowa w tym rozdziale. Rdzenie serii ARM w kolejnych wcieleniach
ciesz± siê ogromn± popularno¶ci± producentów urz±dzeñ codziennego
u¿ytku potrzebuj±cych wysokich wydajno¶ci, takich jak telefony komórkowe,
przeno¶ne odtwarzacze DVD oraz wiele innych. Procesory z rdzeniem
ARM stanowi± oko³o 3/4 rynku sprzeda¿y dla 32 bitowych uk³adów.

Stosowana w tej chwili nazwa ARM jest akronimem od angieskich s³ów
\textsl{Advanced RISC Machine}, a wcze¶niej \textsl{Acorn RISC machine}.
Historia tych procesorów siêga roku 1983, gdy brytyjska firma Acorn
Computers pracowa³a nad nowym procesorem dla swoich komputerów. Znaczenie
komputerów Acorn na brytyjskim rynku w owym czasie, przypomina³o tryumfy
komputerów Apple w Stanach Zjednoczonych. W latach odpowiednio 1985
i roku nastêpnym, Acorn prezentuje kolejno procesory ARM1 i ARM2.

Cech± szczególn± ca³ej rodziny procesorów ARM, w tym równie¿ odga³êzieñ
jest zestaw instrukcji maszynowych ³±cz±cych pewne zestawy operacji
czêsto pojawiaj±cych siê w kodzie napisanych w jêzykach wy¿szego poziomu.
Dziêki czemu, skompilowany kod binarny jest bardzo ma³y i mo¿e byæ
wykonywany szybko, mimo niskich czêstotliwo¶ci zegarów taktuj±cych
pracê rdzenia procesora. Zachowano przy tym mechanizmy z procesorów
RISC, gwarantuj±ce sta³± d³ugo¶æ rozkazu. ARM dodatkowo rozszerzy³a
mo¿liwo¶ci rdzeni o technologie \textsc{Thumb}, \textsc{Thumb-2} i
\textsc{Neon} -- w szczególno¶ci ta ostatnia znalaz³a zastosowanie
w implementacji kodeków g³osowych w telefonach GSM.

Z architektury ARM wywodz± siê takie rodziny procesorów, jak XScale
firmy Intel -- znajduj±cy zastosowanie w wielu PDA -- oraz OMAP firmy
Texas Instruments -- wielordzeniowe procesory multimedialne.


\subsection{ARM 3}


\subsection{ARM 6}


\subsection{\label{sub:ARM-7}ARM 7}


\subsection{\label{sub:ARM-9}ARM 9}


\subsection{Jazelle}

\begin{floatingfigure}[r]{34mm}%
\noindent \includegraphics[width=30mm]{images/jazelle_logo}\end{floatingfigure}%
Technologia Jazelle DBX (skrót od ang. \textsl{Direct Bytecode eXecution})
zosta³a opracowana przez ARM w celu przyspieszania sprzêtowego pewnych
operacji bajtkodu maszyny wirtualnej Java (w skrócie JVM). Pozwala
ona wykonywaæ bajtkod Javy, jakby by³ on natywnym kodem procesora.
Sprzêtowa implementacja Jazelle DBX wykonana jest na oko³o 12 tysi±cach
bramek, co oznacza niski koszt implementacji wewn±trz uk³adu. Liczba
ta jest znacz±co mniejsza od liczby bramek typowego koprocesora matematycznego.

Takie podej¶cie wzmocnione przez technologiê Jazelle RCT (ang. \textsl{Runtime
Compilation Target}), która wspiera kompilacjê \textsl{ahead-of-time}
(AOT) i \textsl{just-in-time} (JIT), pozwala znacz±co zwiêkszyæ wydajno¶æ
aplikacji Java w urz±dzeniach przeno¶nych, g³ównie telefonach komórkowych.
Aktualne mo¿liwo¶ci technologii Jazelle RCT siêgaj± du¿o dalej, wspieraj±c
kompilacjê i wykonywanie kodu takich platform jak Microsoft.NET, Perl
czy Python. Implementacjê tej technologii wspieraj± wszystkie mikroprocesory
z rodziny ARM Cortex-A\cite{jazelle-wp}.


\section{Freescale Semiconductor}

Firma Freescale Semiconductor%
\footnote{Strona producenta: \url{http://www.freescale.com}.%
} to korporacja powsta³a z wydzielenia dzia³u uk³adów scalonych firmy
Motorola. Uk³ady scalone Motoroli od kilkudziesiêciu lat maj± uznan±
pozycjê na rynku elektoniki cyfrowej, a udzia³ Motoroli w konsorcjum
tworz±cym rdzeñ PowerPC odcisn±³ du¿e piêtno na tej architekturze.

Warto równie¿ dodaæ, i¿ pod koniec lat '80 assembler rodziny mikroprocesorów
6800 by³ w Polsce bardzo popularny. Procesory te znalaz³y siê w popularnych
komputerach Amiga oraz by³y stosowane w wielu urz±dzeniach. Warto¶æ
programów w assemblerze dla tych uk³adów by³a bardzo wysoka, a kompilatory
jêzyków wysokiego poziomu obarczone by³y du¿ym nak³adem na kodzie
wynikowym. Osi±ganie dobrych wyników w programach graficznych i grach
na komputerze Amiga osi±gano dziêki fragmentom programów pisanych
w assemblerze.

Firma Motorola w latach 1991--2004 wraz z IBM i Apple bra³a udzia³
w pracach konsorcjum tworz±cym rdzeñ PowerPC. W roku 2006, gdy firma
Apple zrezygnowa³a oficjalnie z architektury PowerPC na rzecz produktów
firmy Intel, konsorcjum zmieni³o swój kszta³t. Od 2004 roku, gdy Freescale
zosta³ wydzielony jako osobny podmiot biznesowy z Motoroli, nadal
pracowa³ nad udoskonalaniem architektury PowerPC, natomiast wycofanie
siê Apple sprawi³o, ¿e ¶wietny sk±d in±d PowerPC G5 by³ ostatnim uk³adem
zastosowanym w popularnych komputerach u¿ytkowych. \begin{floatingfigure}[r]{2cm}%
\noindent \includegraphics[width=2cm]{images/logo_power_org_black}\end{floatingfigure}%
Aktualnie firmy wspó³pracuj±ce nad architektur± zwi±zane s± z Power.org%
\footnote{Istniej±ca od 2004 roku, utworzona przez IBM fundacja na rzecz architektury
\textsc{Power}, jej adres internetowy: \url{http://www.power.org}.%
}. Organizacja ta zrzesza ponad 40 firm z bran¿y elektroniki i oprogramowania,
miêdzy innymi IBM, Freescale, Synopsys, Cadence, Mentor Graphics,
Wind River, Xilinx. G³ównym jej celem jest promowanie platformy dla
nowych rozwi±zañ i wspólne badanie nad rozwojem \textsc{Power Architecture}\cite{power.org-vision}.

Firma Freescale posiada cztery rodziny mikroprocesorów 32 bitowych,
opisane krótko w kolejnych podrozdzia³ach.


\subsection{PowerQUICC}

Uk³ady zaawansowanych mikrokontrolerów na bazie konstrukcji PowerPC
rozwijane od 1995 roku. Cech± szczególn± linii PowerQUICC jest wbudowany
zaawansowany podsystem kontroli komunikacyjnej, odci±¿aj±cej g³ówny
rdzeñ uk³adu. Dziêki temu nadaj± siê do zastosowañ w systemach telekomutacyjnych,
takich jak routery lub centrale telefoniczne. Seria uk³adów PowerQUICC
I oznaczana przez symbole MPC8xx by³y pierwszymi uk³adami z rodziny
PowerPC produkowanymi przez Motorolê. Ró¿norodne wersje uk³adów ró¿ni³y
siê dok³adanym wyposa¿eniem, konfiguracj± ilo¶ci potoków, pamiêci
cache, obs³ugiwanymi interfejsami.

%
\begin{figure}
\noindent \includegraphics[width=15cm]{vector/mpc885-block-diagram}

\caption{Schemat blokowy MPC885.}

\end{figure}
W roku 1998 pojawi³y siê uk³ady z linii PowerQUICC II oznaczane symbolami
MPC82xx bazowane na procesorze PowerPC 603e znanym te¿ jako G2 (pojawi³y
siê w komupterach firmy Apple). Wersja od Motoroli trafia³a do stacji
bazowych telefonii komórkowej, switchy sieciowych i multiplekserów
obs³uguj±cych abonenckie linie cyfrowe%
\footnote{Abonencka linia cyfrowa (ang. Digital Subscriber Line, DSL) stosowana
w telekomunikacji naziemnej do oferowania szybkich ³±cz Internetowych;
multiplekser dostêpowy DSL to urz±dzenie pozwalaj±ce na obs³ugê sygna³u
cyfrowego na analogowych liniach abonenckich.%
}. Seria ta zosta³a ca³kowicie zast±piona przez liniê PowerQUICC II
Pro produkowan± od roku 2004.

Linia PowerQUICC II Pro bazowa³a na rozbudowanym rdzeniu, którego
pamiêæ cache zosta³a zwiêkszona do 32kB dla instrukcji i 32kB dla
danych oraz zwiêkszono maksymalne taktowanie rdzenia. Oznaczano j±
symbolami MPC83xx, przy czym dodatkowa litera E symbolizowa³a wbudowan±
jednostkê szyfruj±c±. Uk³ady te trafi³y do urz±dzeñ produkowanych
przez firmê Cisco.

Od roku 2003 firma Freescale oferuje uk³ady z linii PowerQUICC III
oparte o rdzeñ e500, który nie ma odpowiednika w procesorach PowerPC
ogólnego zastosowania. Oznaczane symbolami MPC85xx uk³ady sa specjalizowanymi
procesorami komunikacyjnymi, zdolnymi obs³ugiwaæ wiele portów Gigabit
Ethernet jednocze¶nie, co czyni je doskona³ymi procesorami dla szybkich
switchy. W tej linii s± uk³ady wielordzeniowe.

Firma Freescale wspiera projektowanie dla procesorów linii PowerQUICC
bogatym zestawem nardzêdzi, w tym ¶rodowiskiem CodeWarrior. Narzêdzia
te s± jednak s± bardzo drogie. Testowe wersje tego oprogramowania
maj± okrojone mo¿liwo¶ci i nie s± popularne w¶ród amatorów.


\subsection{ARM}

W rozdziale \ref{sec:ARM} opisane s± osi±gniêcia firmy ARM w projektowaniu
i sprzeda¿y projektów rdzeni mikroprocesorów dla innych firm produkuj±cych
uk³ady scalone procesorów i mikrokontrolerów.


\subsection{68K/ColdFire}

Rodzina 68K jest najbardziej znan± rodzin± mikroprocesorów firmy Motorola,
a aktualnie Freescale Semiconductor. Model MC68000 debiutiowa³ w 1979
roku i mocno zmodyfikowany jest produkowany do dnia dziesiejszego.
Najmocniejszy typ uk³adu w rodzinie MC68060 jest równie¿ nadal produkowany
w kilku odmianach. Procesory te znalaz³y zastosowane w komputerach
Atari i Amiga oraz wielu urz±dzeniach powszechnego u¿ytku.

Uk³ady ColdFire s± przekszta³con± wersj± uk³adów rodziny 68K dla zastosowañ
w systemach wbudowanych. S± wielokrotnie szybsze ni¿ ich oryginalne
odpowiedniki, pracuj± z czêstotliwo¶ci± do 300 MHz (w porównaniu z
60 MHz fla MC68060). Aktualna zgodno¶æ binarna uk³adów ColdFire sprawia,
¿e grupy zapaleñców konstruuj± klony komputerów Atari i Amiga. Istniej±
równie¿ porty systemu Linux dla uk³adów z rodziny 68K%
\footnote{Wiêcej informacji na stronie \url{http://www.linux-m68k.org}.%
}.

Ostatnia wersja rdzenia ColdFire oznaczana jako V5 jest rdzeniem superskalarnym,
przy czym do dzi¶ firma Freescale nie rozpocze³a sprzeda¿y uk³adów
z tej rodziny. Produkowane i sprzedawane uk³ady posiadaj± nadal rdzeñ
oznaczany jako V4, który nie jest jeszcze w pe³ni superskalarny.


\subsection{MCORE}

Rodzina MCORE to kilka uk³adów 32-bitowych zaprojektowanych specjalnie
do specyficznych zastosowañ przemys³owych i medycznych. G³ównym kryterium
branym pod uwagê przy konstrukcji tych procesorów by³a energooszczêdno¶æ
oraz obs³uga specyficznych interfejsów przydatnych w przemy¶le (np.
PWM, ang. \emph{Pulse Width Modulation}).


\section{Atmel Corporation}

Firma Atmel Corporation oferuje wiele ró¿nych konstrukcji procesorów,
z których najpopularniejsze to ca³a rodzina mikrokontrolerów AVR --
8 bitowych uk³adów o architekturze RISC, ciesz±ca siê ogromn± popularno¶ci±
w¶ród amatorów. Wiele projektów elektronicznych dostêpnych w internecie
opartych jest w³a¶nie o uk³ady z tej rodziny. Oprócz tego Atmel oferuje
szerok± gamê uk³adów opartych o rdzeñ ARM.


\subsection{AVR32}

AVR32 to rodzina 32 bitowych mikrokontrolerów produkcji firmy Atmel%
\footnote{Strona uk³adów AVR32 u producenta: \url{http://www.atmel.com/products/avr32/}%
} Oferowane s± uk³ady z dwóch g³ównych odmianach: 

\begin{description}
\item [{UC3}] l¿ejszej odmianie mikrokontrolera dla dla mocno zintegrowanych
rozwi±zañ o niskim poborze energii do kontroli i sterowania, 
\item [{AP7}] odmianie wysokowydajnych mikrokontrolerów dla zaawansowanych
multimedialnych aplikacji przeno¶nych, mog±cy miêdzy innymi pracowaæ
pod kontrol± systemu operacyjnego Linux. 
\end{description}
Istotn± przewag± oferty firmy Atmel i uk³adów AVR32 nad uk³adami innych
producentów jest bardzo silne wsparcie dla amatorów oraz ¶rodowiska
otwartego oprogramowania.


\subsection{ARM}

Uk³ady serii AT91SAM ciesz± siê coraz wiêksz± popularno¶ci±, s± bardzo
dobrze udokumentowane przez producenta, który równie¿ dostarcza do
nich bogat± bibliotekê kodu do obs³ugi wbudowanych w uk³ad interfejsów.
Dziêki temu implementacje wielu zastosowañ tej serii procesorów zajmuj±
mniej czasu. Ciekawe konstrukcje p³yt ewaluacyjnych dla tych uk³adów
czyni± produkty firmy Atmel najciekawszymi w rodzinie uk³adów z rdzeniem
ARM.

Grupy uk³adów AT91SAM7S, AT91SAM7SE, AT91SAM7X oparte s± o rdzeñ ARM
7 opisany w rozdziale \ref{sub:ARM-7}. Poszczególne wersje ró¿ni±
siê dostêpnymi interfejsami oraz wieko¶ciami wbudowanej pamiêci. Uk³ady
serii AT91SAM9 bazuj± na rdzeniu ARM 9 opisanym w rozdziale \ref{sub:ARM-9}.


\section{Analog Devices}

Istniej±ca od 1965 roku firma Analog Devices zajmuje siê projektowaniem
i produkcj± z³o¿onych uk³adów scalonych dla techniki analogowej i
cyfrowej. Opórcz uznanych wzmacniaczy i przetwoników analogowo-cyfrowych,
firma produkuje ró¿nego rodzaju sensory (w tym linowy sensor przyspieszenia
ADXL3300 zastosowany w konsoli do gier Wii firmy Nitendo\cite{ad-wii-sensor})
oraz znan± rodzinê procesorów Blackfin, stosowan± w wielu urz±dzeniach
firm takich jak Hitachi czy Roland.


\subsection{Blackfin}

\begin{floatingfigure}[r]{2cm}%
\noindent \includegraphics[width=2cm]{images/BF_chip_100x100}\end{floatingfigure}%
Mikroprocesory z rdzeniem Blackfin to 16- lub 32-bitowe uk³ady w architekturze
RISC. Potok przetwarzania jest 10 etapowy, a konstrukcje jednostek
arytmetycznych, stawiaj± architekturê Blackfin w¶ród procesorów DSP.
Pe³ne wsparcie SIMD pozwala na wydajne przetwarzanie multimedialne
obrazu wideo oraz d¼wiêku. Procesor ten powsta³ jako rozwiniêcie starszej
architektury SHARC firmy Analog Devices i architektury XScale firmy
Intel. Wewnêtrzna budowa uk³adów Blackfin oparta jest o architekturê
harvardzk±. Dwie 16-bitowe jednostki MAC, dwie 40-bitowe jednoski
arytmetyczno-logiczne, dwie 40-bitowe <barrel shifter> pozwalaj± wykonaæ
do trzech instrukcji w jednym cyklu zegara, przy odpowiedniej optymalizacji.
Lokuje to procesory Blackfin w rodzinie DSP. Ochrona pamiêci (MPU),
ró¿ne poziomy operacji (u¿ytkownik, j±dro), operacje jednocyklowe,
pamiêæ podrêczna instrukcji i danych oraz zestaw instrukcji do testów
bitu, dostêpu do bajtu, s³owa lub liczby ca³kowitej i do zintegrowanych
\char`\"{}peryferiów\char`\"{} czyni± ten uk³ad procesorem RISC. Lista
instrukcji (16-biotwych dla zwyk³ych operacji i 32- lub 64-bitowych
dla operacji DSP) tego procesora obejmuje bardzo z³o¿one operacje,
co czyni skompilowany kod binarny bardzo wydajnym i wysoce zoptymalizwoanym.
Do wad uk³adów Blackfin trzeba zaliczyæ brak jedostki zarz±dzania
pamiêci± (MMU) i obs³ugi wirtualizacji. Uk³ad ten najczê¶ciej jest
stosowanych w urz±dzeniach audio-video do u¿ytku codziennego oraz
w profesjonalnych urz±dzeniach wysokiej jako¶ci przetwarzaj±cych d¼wiêk
lub obraz. 


\subsection{TigerSHARC}

\begin{floatingfigure}[r]{2cm}%
\noindent \includegraphics[width=2cm]{images/TS_chip_100x100}\end{floatingfigure}%
Procesory TigerSHARK s± podobnie jak uk³ady Blackfin po³±czeniem konstrukcji
DSP z wydajn± architektur± RISC, jednak¿e ogromny nacisk po³o¿ono
na architekturê wieloprocesorow±. Bardzo du¿a wewnêtrzna pamiêæ pozwala
przetwa¿aæ FFT nawet do 64.000 punktów, a bardzo szybkie szyny wewnêtrze
i zewnêtrzne pozwalaj± uzyskiwaæ ogromne moce przetwarzania strumieni
danych.

Uk³ady te s± stosowane szeroko w urz±dzeniach infrastruktury telefonii
3G oraz w militarnych systemach obronnych, na przyk³ad radarach lotniczych.


\subsection{SHARC}

\begin{floatingfigure}[r]{2cm}%
\noindent \includegraphics[width=2cm]{images/sharc_chip_100x100}\end{floatingfigure}%
Uk³ady SHARC (nazwa od ang. \textsl{Super Harvard Architecture Single-Chip
Computer}) to wydajne procesory DSP o architekturze RISC, których
pierwsze konstrukcje siêgaj± roku 1994. S± wzorcem dla nowszych uk³adów
TigerSHARC i Blackfin.

Szeroko¶æ s³owa rozkazu tych procesorów do 48 bitów, a liczby ca³kowitej
i pojedynczej precyzji 32 bity. Rozrzeszona obs³uga liczb zmienno-przecinkowych
rozszerzona jest do 40 bitów. SHARC nie posiada wbudowanego MMU. Dwa
identyczne zestawy rejestrów ogólnego stosowania pozwalaj± na realizacjê
bardzo szybkiego prze³±czania kontekstu. Wspó³praca pomiêdzy wieloma
procesorami w systemie mo¿e byæ realizowana szeregowo, gdy¿ SHARC
oferuj± wiele niezale¿nych interfejsów szeregowych na pojedynczym
uk³adzie.


\section{Infineon Technologies}

Firma Infineon Technologies z siedzib± w Niemczech to producent uk³adów
pó³przewodnikowych znany przede wszystkim z uk³ad³ow pamiêci DRAM.


\section{Texas Instruments}

Firma Texas Instruments jest bardzo znanym producentem elektroniki
dla zastosowañ wojskowych i s³ynie z kalkulatorów naukowych, których
rola spad³a w dziesiejszych czasach, gdy dostêp do notebooków i palmtopów
jest na porz±dku dziennym. Najwa¿niejsz± dziedzin± dzia³ania tej firmy
jest aktualnie rozwijanie nowatorskich technologii, takich jak DLP
oraz projektowanie i produkcja szerokiej gamy uk³adów scalonych dla
ró¿nych zastosowañ w elektronice. Klientami Texas Instruments s± firmy
dzia³aj±ce w ka¿dej istniej±cej bra¿ny przemys³u.

Mikroprocesory tej firmy maj± ogromny udzia³ w rynku telefonii komórkowej.
Wydajno¶æ i mo¿liwo¶ci uk³adów tej firmy przyczyni³a siê do znacznego
postêpu w dziedzinie telefonii 3G, w krótce prawdopodobnie 4G. W¶ród
oferowanych przez Texas Instruments uk³adów s± równie¿ 32 bitowe mikrokontrolery,
w tym równie¿ uk³ady o cech DSP, lub z rdzeniami DSP zintegrowane
(patrz: OMAP).


\subsection{MSP430}

Uk³adu serii MSP430 to nastawione na oszczêdno¶æ energii 16 bitowe
uk³ady RISC, które cechuj± siê ma³ymi rozmiarami i bardzo nisk± cen±.
Oferowane s± w szerokiej gamie wersji, w czterech g³ównych ga³êziach,
które rozró¿nia obs³uga wy¶wietlacza LCD lub jej brak, oraz maksymalna
wydajno¶æ oraz napiêcia zasilania.

Przyk³adowo uk³ad mikrokontrolera MSP430FG4618 wyposa¿ony w 116~kB
pamiêci Flash, 8~kB RAM, zasilany napiêciem 2,2~V pobiera tylko
400~$\mu$A w trakcie aktywno¶ci przy 1~MHz taktowania, 1,3~$\mu$A
w trakcie spoczynku i 0,22~$\mu$A w trybie podtrzymywania pamiêci.
Uk³ad ten zosta³ przewidziany do przeno¶nych urz±dzeñ medycznych.


\subsection{C2000}

Uk³ady rodziny TMS320C2000 s± okre¶lane przez producenta jako cyfrowe
kontrolery sygna³owe DSC (ang. \emph{Digital Signal Controller}).
Jest to hybryda cech mikrokontrolera RISC z architektur± DSP, która
przenaczo na jest do szybkiej analizy sygna³ów w urz±dzeniach pomiarowych
i pomiarowo-steruj±cych. Wszystkie uk³ady z tej rodziny posiadaj±
wbudowane kana³y PWM, które doskonale nadaj± siê do sterowania urz±dzeñ
elektromechanicznych. Dodatkowo dostêpne s± wersje wspieraj±ce interfejsy
CAN, SCI, SPI, I$^{\text{2}}$C.

Istotn± cech± dostêpn± w tej rodzinie jest ga³±¼ uk³adów oznaczna
symbolem TMS320F283xx, która posiada sprzêtow± jednostkê do operacji
zmiennoprzecinkowych. Wydajno¶æ maksymalna osi±gana w tych uk³adach
dochodzi do 300 MFLOPS przy 150 MHz zegarze taktuj±cym rdzeñ mikrokontrolera.

Dodatkow± cech± istotn± z punktu widzenia konstruktorów i programistów
systemu na bazie tych mikorokontrolerów, jest sprzêtowe wparcie dla
JTAG (patrz rozdzia³ \ref{sec:Interfejs-JTAG}) pracuj±cego z pe³n±
prêdko¶ci± uk³adu. Zastosowanie JTAG do uruchamiania systemu wymaga
zastosowania odpowiedniego emulatora, które znajduj± siê w bogatej
ofercie kilku firm wspó³pracuj±cych. Oferta uk³adów uruchomieniowych
dla tej serii mikrokontrolerów jest bogata, jednak¿e produkty Texas
Instruments s± drogie. Sztandarowe ¶rodowisko programistyczne Code
Composer Studio równie¿ nale¿y do drogich narzêdzi, choæ ewaluacyjne
wersje s± dostêpne za darmo nawet na 120 dni.


\subsection{TMS470}


\section{Microchip Technology}

Firma Microchip Technology z siedzib± w USA to producent bardzo znanych
uk³adów PIC, które s± 8 lub 16-bitowymi mikrokontrolerami w Polsce
czêsto stosowanymi do celów edukacyjnych. Cech± szczególn± uk³adów
PIC jest ich prostota, co w sytuacjach budowy bardoz prostych urz±dzeñ
kontrolnych ma niebagatelne znaczenie. Brak jest w ofercie Microchip
Technology uk³adów o architekturze 32-bitowej. 


\section{NXP Semiconductors}

Firma NXP Semiconductors z siedzib± w Holandii jest kontynuatorem
dokonañ firmy Philips w zakresie scalonych uk³adów pó³przewodnikowych.
Wsród nich znajduj± siê uk³ady mikrokontrolerów z rodziny 80C51 oraz
uk³ady oparte o rdzenie ARM7 i ARM9 opisane w rozdziale \ref{sec:ARM}.


\section{STMicroelectronics}

Firma STMicroelectronics z siedzib± w Szwajcarii jest twórc± i producentem
znanych uk³adów 8-bitowych serii ST6 i ST7. Ma w swojej ofercie równie¿
16-bitowe uk³ady serii ST10. Rodzina 32-bitowych uk³adów STM32, STR7
i STR9 produkowanych przez t± firmê, to konstrukcje bazuj±ce na rdzeniach
z firmy ARM (szerzej rozdzia³ \ref{sec:ARM}).


\chapter{Narzêdzia}


\section{\label{sec:JTAG-ICE}JTAG ICE mk-II}


\part{Realizacja praktyczna}

Testing

\bibliographystyle{plplain}
\bibliography{literatura}

\end{document}
