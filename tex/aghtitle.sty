%% 
%% This is file `aghtitle.sty',
%% author: Micha/l Fita <manveru@interia.pl>
%% version:  0.10  25/09/2007     
%%
%% Copyright (C) 2007 by Micha/l Fita. All rights reserved.
%% 
%% It may be distributed and/or modified under the
%% conditions of the LaTeX Project Public License, either version 1.2
%% of this license or (at your option) any later version.
%% The latest version of this license is in
%%    http://www.latex-project.org/lppl.txt
%% and version 1.2 or later is part of all distributions of LaTeX
%% version 1999/12/01 or later.
%% 
%% 
\NeedsTeXFormat{LaTeX2e}[1996/12/01]
\ProvidesPackage{aghtitle}[2007/09/25 v. 0.1 Strona Tytylowa Pracy Magisterskiej]

\typeout{Strona Tytulowa Pracy Magisterskiej by Michal Fita}

% Ladowanie niezbednych zaleznosci
\RequirePackage{ifthen}
\RequirePackage{xkeyval}
\RequirePackage{substr}
\RequirePackage{calc}

% Deklaracje liczników
\newcounter{@authorCounter}

% Deklaracje wartosci logicznych
\newboolean{WhetherPdf} \setboolean{WhetherPdf}{false}
\newboolean{WhetherMoreAuthors} \setboolean{WhetherMoreAuthors}{false}

% Opcje pakietu
\DeclareOptionX{pdftex}{\setboolean{WhetherPdf}{true}}
\DeclareOptionX{type}[lic]{
  \ifthenelse{\equal{#1}{lic}}
    {\def\agh@worktype{Praca licencjacka}}{}
  \ifthenelse{\equal{#1}{mgr}}
    {\def\agh@worktype{Praca magisterska}}{}
  \ifthenelse{\equal{#1}{inz}}
    {\def\agh@worktype{Praca in¿ynierska}}{}
  \ifthenelse{\equal{#1}{dr}}
    {\def\agh@worktype{Praca doktorska}}{}
}
\ProcessOptionsX
% Opcjonalne ladowanie
\ifthenelse{\boolean{WhetherPdf}}
{
  %\RequirePackage[pdftex]{graphicx}
  \def\agh@orzelek{orzelAGH.jpg}
}
{
  %\RequirePackage[dvips]{graphicx}
  \def\agh@orzelek{orzelAGH.eps}
}
% Definicje uniwersalne polskich znaczków
\newcommand{\agh@a}{\k a}             %{\char177}
\newcommand{\agh@c}{\@tabacckludge'c} %{\char230}
\newcommand{\agh@e}{\k e}             %{\char234}
\newcommand{\agh@l}{\l}               %{\char179}
\newcommand{\agh@o}{\@tabacckludge'o} %{\char243}
\newcommand{\agh@s}{\@tabacckludge's} %{\char182}
\newcommand{\agh@z}{\.z}              %{\char191}
\newcommand{\agh@x}{\@tabacckludge'z} %{\char188}

% Nowe komendy
%\renewcommand{\title}[1]{\def\agh@title{#1}}
%\renewcommand{\author}[1]{\def\agh@author{#1}}

\newcommand{\authorIter}
{
  \def\@nauthor{\@author}
  \def\@tmpauthor\@empty
  \whiledo{\value{@authorCounter}>0}
  {
    \Large{\BeforeSubString{,}{\@nauthor}}\\
    Nr albumu: \BeforeSubString{,}{\@nauthor}\\
    \let\@tmpauthor\BehindSubString{,}{\@nauthor}
    \let\@nauthor\@tmpauthor 
    \addtocounter{@authorCounter}{-1}
  }
  \global\let\@nauthor\@empty
  \global\let\@tmpauthor\@empty
}

\newcommand{\promotorJeden}[1]{}
\newcommand{\promotorDwa}[1]{}
\newcommand{\authorJeden}[1]{}
\newcommand{\authorDwa}[1]{}
\newcommand{\nralbumuJeden}[1]{}
\newcommand{\nralbumuDwa}[1]{}

% Uklad strony tytulowej
\renewcommand{\maketitle}{
  \IfSubStringInString{,}{\@author}{
    \SubStringsToCounter{@authorCounter}{,}{\@author}
    \stepcounter{@authorCounter}
    \setboolean{WhetherMoreAuthors}{true}
  }
  
  \begin{titlepage}
  	
    \begin{center}
    	\vspace{-3\baselineskip}
      \includegraphics[height=3\baselineskip]{\agh@orzelek}\par % Orzelek
      \vspace*{\medskipamount}
      
      \begin{tabular}{c}
        \large{Akademia G{\agh@o}rniczo-Hutnicza im. Stanis{\agh@l}awa Staszica w Krakowie}
      \end{tabular}
      
      \vspace{-1.3\smallskipamount}
      \noindent\rule{\textwidth}{.4pt}\\[-3.65\smallskipamount]
  		\noindent\rule{\textwidth}{1pt}\\[-3.85\smallskipamount]
  		\noindent\rule{\textwidth}{.4pt}\par 
      
      \vspace*{1.5\smallskipamount}
      
      \begin{tabular}{c}
        \large{Wydzia{\agh@l}\ Elektrotechniki, Automatyki, Informatyki i Elektroniki}\\
        \large\textit{Katedra Informatyki}
      \end{tabular}
      
      \vspace*{3.0\baselineskip}
    	{\Large\agh@worktype\par} % Typ pracy (definiowane opcj¹)
     	
      \vspace*{3.0\baselineskip}
      
      {\huge\bfseries\@title} % Tyty³ pracy
      \vspace{2\baselineskip}
      
      \authorIter
      
      \vfill
      
      \noindent\rule{\textwidth}{.4pt}\\[-3.65\smallskipamount]
  		\noindent\rule{\textwidth}{1pt}\\[-3.85\smallskipamount]
  		\noindent\rule{\textwidth}{.4pt}\par
  		\begin{tabular}{c}
  			\large Kraków 2007 \the@authorCounter
  		\end{tabular}
      
    \end{center}
  \end{titlepage}
}
